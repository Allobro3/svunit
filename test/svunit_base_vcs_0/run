source ../test_functions.bsh

# create the Makefile
create_svunit.pl

# build and run svunit with vcsi
make

expect_file run.log &&
expect_string "INFO:  \[0\]\[dut_ut\]: Use the INFO macro" run.log &&
expect_string "ERROR: \[0\]\[dut_ut\]: Use the ERROR macro" run.log &&
expect_string "strictly_so_the_teardown_is_called::FAILED" run.log &&
expect_string "FAILED" run.log &&
expect_string "FAILED" run.log &&
expect_testrunner_fail run.log

exit 0
