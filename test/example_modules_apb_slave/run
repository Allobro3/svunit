source ../test_functions.bsh

pushd .

cd $SVUNIT_INSTALL/examples/modules/apb_slave
create_svunit.pl


###################
# RUN WITH QUESTA #
###################

# build and run svunit with qverilog
make

# check the log output for a PASS from the testrunner
expect_file $SVUNIT_INSTALL/examples/modules/apb_slave/run.log
expect_testrunner_pass $SVUNIT_INSTALL/examples/modules/apb_slave/run.log

make clean


################
# RUN WITH VCS #
################

# build and run svunit with qverilog
make SIMULATOR=VCS

expect_file $SVUNIT_INSTALL/examples/modules/apb_slave/run.log
expect_testrunner_pass $SVUNIT_INSTALL/examples/modules/apb_slave/run.log

popd

exit 0
